## **クリップボード履歴ツール仕様書**

### **1. 概要**

クリップボードの履歴を管理し、過去にコピーしたテキストや画像を簡単に再利用できるようにするデスクトップアプリケーション。PythonのTkinterライブラリを使用してGUIを構築する。

### **2. 開発環境**

  * **言語**: Python 3.x
  * **GUIライブラリ**: Tkinter (Python標準ライブラリ)
  * **外部ライブラリ**:
      * **`Pillow`**: 画像の表示と操作 (将来的な機能拡張用)
      * **`keyboard`**: グローバルホットキーの監視 (将来的な機能拡張用)

**インストール**:

```bash
pip install Pillow keyboard
```

### **3. 機能一覧**

#### **3.1. 履歴の管理機能**

  * **リスト表示**:
      * コピーしたテキストと画像の履歴を一覧で表示する。
      * テキストは内容の一部を、画像はサムネイルを表示する。
  * **検索**:
      * 履歴の中からキーワードで目的の項目を検索できる。
  * **ピン留め（お気に入り）**:
      * よく使う項目をリストの先頭に固定表示する。
  * **削除**:
      * 不要な履歴を個別に、または一括で削除する。
  * **定型文の登録**:
      * 頻繁に使用するテキスト（メールアドレス、挨拶文など）を登録し、いつでも呼び出せるようにする。

#### **3.2. 貼り付け機能**

  * **選択して貼り付け**:
      * 履歴リストから項目を選択し、アクティブなウィンドウに貼り付ける。
  * **書式なし貼り付け**:
      * 書式情報（太字、色など）を取り除き、プレーンテキストとして貼り付ける。
  * **複数選択と結合貼り付け**:
      * 複数のテキスト履歴を選択し、それらを連結して一度に貼り付ける。

#### **3.3. 対応データ形式**

  * テキスト
  * 画像
  * ファイルパス

#### **3.4. UI/UXと設定**

  * **ホットキー**:
      * 特定のキー操作（例：`Ctrl`キーの2回押し）で履歴ウィンドウを呼び出す。
  * **テーマ設定**:
      * ライトモードとダークモードの切り替え機能を提供する。
  * **常駐とスタートアップ**:
      * PC起動時に自動でツールが起動し、バックグラウンドでクリップボードを監視する。
  * **除外設定**:
      * パスワード管理ソフトなど、履歴を残したくないアプリケーションを指定できる。

### **4. メニューバーの項目**

Tkinterのメニューバーに以下の項目を設けることで、操作性と機能へのアクセスを向上させます。

  * **ファイル (File)**
      * **設定 (Settings)**: アプリケーションの設定画面を開く。
      * **終了 (Exit)**: アプリケーションを終了する。
  * **編集 (Edit)**
      * **履歴をクリア (Clear History)**: すべての履歴を削除する。
      * **ピン留めされた項目をクリア (Clear Pinned Items)**: ピン留めされた項目をすべて解除する。
  * **表示 (View)**
      * **テーマ (Theme)**:
          * **ライト (Light)**
          * **ダーク (Dark)**
      * **常に手前に表示 (Always on Top)**: ウィンドウを常に最前面に表示する。
  * **ヘルプ (Help)**
      * **バージョン情報 (About)**: アプリケーションのバージョン情報を表示する。
      * **ヘルプ (Help)**: 簡単な使い方や機能説明を表示する。

### **5. 拡張性を高めるためのアプローチ**

将来的な機能追加を容易にするため、以下の設計思想を取り入れます。

  * **プラグインアーキテクチャ**:
      * コア機能とは別に、「プラグイン」として後から機能を追加できる仕組みを導入する。
      * **プラグイン例**:
          * **QRコード生成**: コピーしたテキストからQRコードを生成する。
          * **翻訳**: 選択したテキストを翻訳する。
          * **コード整形**: コピーしたコードを整形する。
  * **スクリプト機能の統合**:
      * ユーザーが独自のPythonスクリプトを記述し、コピーしたテキストを加工できるようにする。
  * **API連携**:
      * 他のWebサービスやアプリケーションと連携するためのAPIを設ける。
      * **連携例**:
          * **クラウド同期**: 複数のデバイス間でクリップボード履歴を同期する。
          * **タスク管理ツール連携**: コピーした内容をタスク管理ツールに登録する。
  * **モジュール化された設計**:
      * 「UI」「データ管理」「クリップボード監視」といった機能を独立したモジュールとして開発し、保守性と拡張性を高める。
